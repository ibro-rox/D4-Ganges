\documentclass[a4paper,11pt]{article}

\usepackage{listings}
\usepackage{color}
\usepackage[margin=1in]{geometry}
\usepackage{pdfpages}
\definecolor{mygray}{rgb}{0.4,0.4,0.4}

\lstset{
basicstyle=\footnotesize\sffamily\color{black},
commentstyle=\color{mygray},
frame=single,
breaklines=true,% helps wrap huge lines in the code to fit onto the page
numbers=left,
numbersep=5pt,
numberstyle=\tiny\color{mygray},
keywordstyle=\color{blue},
showspaces=false,
showstringspaces=false,
stringstyle=\color{cyan},
tabsize=1
}

\begin{document}
\appendix
\section{Code Listing}
\subsection{PID\_values\_test\_2.c}
 \lstinputlisting[language=C++]{../../Comms/ControllerInterface/PID_values_test_2.c}
\subsection{PID\_values\_test\_3.c}
 \lstinputlisting[language=C++]{../../Comms/ControllerInterface/PID_values_test_3.c}
\subsection{test2\_basestation\_comms.c}
 \lstinputlisting[language=C++]{../../Comms/Combined_interface_comms/base/test2_basestation_comms.c}
 \subsection{test3\_basestation\_comms.c}
 \lstinputlisting[language=C++]{../../Comms/Combined_interface_comms/base/test3_basestation_comms.c}
 \subsection{test5\_basestation\_comms.c}
 \lstinputlisting[language=C++]{../../Comms/Combined_interface_comms/base/test5_basestation_comms.c}
\subsection{ESCPID/AccelGyro/AccelGyro.ino}
\lstinputlisting[language=C++]{../../ControlIntegration/ESCPID/AccelGyro/AccelGyro.ino}
\subsection{ESCPID/AccelGyro/Definitions.h}
\lstinputlisting[language=C++]{../../ControlIntegration/ESCPID/AccelGyro/Definitions.h}
\subsection{ESCPID/AccelGyro/PWM.cpp}
\lstinputlisting[language=C++]{../../ControlIntegration/ESCPID/AccelGyro/PWM.cpp}
\subsection{ESCPID/AccelGyro\_TEST/utils.cpp}
\lstinputlisting[language=C++]{../../ControlIntegration/ESCPID/AccelGyro/utils.cpp}
\subsection{ESCPID/AccelGyro/AccelGyro.ino}
\lstinputlisting[language=C++]{../../ControlIntegration/ESCPID_TEST/AccelGyro/AccelGyro.ino}
\subsection{ServoPID/AccelGyro/AccelGyro.ino}
\lstinputlisting[language=C++]{../../ControlIntegration/ServoPID/AccelGyro/AccelGyro.ino}
\subsection{leonardoPWM.ino}
\lstinputlisting[language=C++]{../../Il-MattoExampleCode/leonardoPWM/leonardoPWM.ino}
\subsection{leonardoPWM\_input.ino}
\lstinputlisting[language=C++]{../../Il-MattoExampleCode/leonardoPWM_input/leonardoPWM_input.ino}
\end{document}
