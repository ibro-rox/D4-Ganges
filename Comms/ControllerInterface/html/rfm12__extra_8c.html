<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>rfm12lib: rfm12_extra.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Source&nbsp;Documentation</span></a></li>
      <li><a href="globals.html"><span>Alphabetical&nbsp;Index</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>rfm12_extra.c File Reference</h1>
<p>rfm12 library extra features source  
<a href="#_details">More...</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rfm12__extra_8c.html#a1d826816eebbf80d3c10a9b001d9606a">ISR</a> (ADC_vect, ISR_NOBLOCK)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ASK mode ADC interrupt.  <a href="#a1d826816eebbf80d3c10a9b001d9606a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rfm12__extra_8c.html#a2b815e6730e8723a6d1d06d9ef8f31c0">adc_init</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ASK mode ADC interrupt setup.  <a href="#a2b815e6730e8723a6d1d06d9ef8f31c0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rfm12__extra_8c.html#a6e836bfa17609b3e937902eaba82f040">rfm12_ask_tx_mode</a> (uint8_t setting)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">En- or disable ASK transmissions.  <a href="#a6e836bfa17609b3e937902eaba82f040"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rfm12__extra_8c.html#a07c6cf0e0a1a6dedc31e05ff4fca35a3">rfm12_tx_on</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable the transmitter immediately (ASK transmission mode).  <a href="#a07c6cf0e0a1a6dedc31e05ff4fca35a3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rfm12__extra_8c.html#a9c2aa5cfb23d974d8a6c91a08487d76e">rfm12_tx_off</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set default power mode (usually transmitter off, receiver on).  <a href="#a9c2aa5cfb23d974d8a6c91a08487d76e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rfm12__extra_8c.html#a357533c48a701e5a1491dd6e82a31ae6">rfm12_set_wakeup_timer</a> (uint16_t val)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function sets the wakeup timer register.  <a href="#a357533c48a701e5a1491dd6e82a31ae6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rfm12__extra_8c.html#a07eb455d99d583edce48c8bd8bd0f377">rfm12_set_batt_detector</a> (uint16_t val)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function sets the low battery detector and microcontroller clock divider register.  <a href="#a07eb455d99d583edce48c8bd8bd0f377"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rfm12__extra_8c.html#a07f231285fa4d71395fe3344d6f265a5">rfm12_get_batt_status</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the current low battery detector status.  <a href="#a07f231285fa4d71395fe3344d6f265a5"></a><br/></td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structrfm12__rfrxbuf__t.html">rfm12_rfrxbuf_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="rfm12__extra_8c.html#a135ac6a750ac4a997cf86746eb139f85">ask_rxbuf</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The ASK mode receive buffer structure.  <a href="#a135ac6a750ac4a997cf86746eb139f85"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>rfm12 library extra features source </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Hans-Gert Dahmen </dd>
<dd>
Peter Fuhrmann </dd>
<dd>
Soeren Heisrath </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>0.9.0 </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>08.09.09</dd></dl>
<p>This file implements all stuff related to extra features.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>This file is included directly by <a class="el" href="rfm12_8c.html" title="rfm12 library main file">rfm12.c</a>, for performance reasons. </dd></dl>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a2b815e6730e8723a6d1d06d9ef8f31c0"></a><!-- doxytag: member="rfm12_extra.c::adc_init" ref="a2b815e6730e8723a6d1d06d9ef8f31c0" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adc_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ASK mode ADC interrupt setup. </p>
<p>This will setup the ADC interrupt to receive ASK modulated signals. <a class="el" href="rfm12_8c.html#a435d3650bfc7c165fb430a8d4527ef7b" title="This is the main library initialization function.">rfm12_init()</a> calls this function automatically if ASK receive mode is enabled.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>You need to define RFM12_RECEIVE_ASK as 1 to enable this. </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="rfm12__extra_8c.html#a1d826816eebbf80d3c10a9b001d9606a" title="ASK mode ADC interrupt.">ISR(ADC_vect, ISR_NOBLOCK)</a> and <a class="el" href="structrfm12__rfrxbuf__t.html" title="The receive buffer structure for the amplitude modulated receive feature.">rfm12_rfrxbuf_t</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a1d826816eebbf80d3c10a9b001d9606a"></a><!-- doxytag: member="rfm12_extra.c::ISR" ref="a1d826816eebbf80d3c10a9b001d9606a" args="(ADC_vect, ISR_NOBLOCK)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ISR </td>
          <td>(</td>
          <td class="paramtype">ADC_vect&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ISR_NOBLOCK&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ASK mode ADC interrupt. </p>
<p>This interrupt function directly measures the receive signal strength on an analog output pin of the rf12 ic.</p>
<p>You will need to solder something onto your rf12 module to make this to work.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>You need to define RFM12_RECEIVE_ASK as 1 to enable this. </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="rfm12__extra_8c.html#a2b815e6730e8723a6d1d06d9ef8f31c0" title="ASK mode ADC interrupt setup.">adc_init()</a> and <a class="el" href="structrfm12__rfrxbuf__t.html" title="The receive buffer structure for the amplitude modulated receive feature.">rfm12_rfrxbuf_t</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a6e836bfa17609b3e937902eaba82f040"></a><!-- doxytag: member="rfm12_extra.c::rfm12_ask_tx_mode" ref="a6e836bfa17609b3e937902eaba82f040" args="(uint8_t setting)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rfm12_ask_tx_mode </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>setting</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>En- or disable ASK transmissions. </p>
<p>When enabling ASK tx mode, this function puts the internal state machine into transmit mode and disables the interrupt. Otherwise it will restore normale operation.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>[setting]</em>&nbsp;</td><td>Pass 1 to enable the raw mode, 0 to disable it. </td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>You need to define RFM12_TRANSMIT_ASK as 1 to enable this. </dd></dl>
<dl class="warning"><dt><b>Warning:</b></dt><dd>This will interfere with the wakeup timer feature. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000003">Todo:</a></b></dt><dd>Use power management shadow register if the wakeup timer feature is enabled. </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="rfm12__extra_8c.html#a07c6cf0e0a1a6dedc31e05ff4fca35a3" title="Enable the transmitter immediately (ASK transmission mode).">rfm12_tx_on()</a> and <a class="el" href="rfm12__extra_8c.html#a9c2aa5cfb23d974d8a6c91a08487d76e" title="Set default power mode (usually transmitter off, receiver on).">rfm12_tx_off()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a07f231285fa4d71395fe3344d6f265a5"></a><!-- doxytag: member="rfm12_extra.c::rfm12_get_batt_status" ref="a07f231285fa4d71395fe3344d6f265a5" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t rfm12_get_batt_status </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the current low battery detector status. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>One of these <a class="el" href="rfm12__extra_8h.html#batt_states">battery states</a> . </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="rfm12__extra_8c.html#a07eb455d99d583edce48c8bd8bd0f377" title="This function sets the low battery detector and microcontroller clock divider register...">rfm12_set_batt_detector()</a> and the <a class="el" href="rfm12__extra_8h.html#batt_states">battery state</a> defines </dd></dl>

</div>
</div>
<a class="anchor" id="a07eb455d99d583edce48c8bd8bd0f377"></a><!-- doxytag: member="rfm12_extra.c::rfm12_set_batt_detector" ref="a07eb455d99d583edce48c8bd8bd0f377" args="(uint16_t val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rfm12_set_batt_detector </td>
          <td>(</td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>val</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function sets the low battery detector and microcontroller clock divider register. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>[val]</em>&nbsp;</td><td>The register value to be passed to the rf12. <br/>
 See the rf12 datasheet for valid values. </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="rfm12__extra_8c.html#a07f231285fa4d71395fe3344d6f265a5" title="Return the current low battery detector status.">rfm12_get_batt_status()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a357533c48a701e5a1491dd6e82a31ae6"></a><!-- doxytag: member="rfm12_extra.c::rfm12_set_wakeup_timer" ref="a357533c48a701e5a1491dd6e82a31ae6" args="(uint16_t val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rfm12_set_wakeup_timer </td>
          <td>(</td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>val</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function sets the wakeup timer register. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>[val]</em>&nbsp;</td><td>The wakeup timer period value to be passed to the rf12. <br/>
 See the rf12 datasheet for valid values. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a9c2aa5cfb23d974d8a6c91a08487d76e"></a><!-- doxytag: member="rfm12_extra.c::rfm12_tx_off" ref="a9c2aa5cfb23d974d8a6c91a08487d76e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void rfm12_tx_off </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set default power mode (usually transmitter off, receiver on). </p>
<p>This will usually stop a transmission. This function is used to emulate amplitude modulated signals.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>You need to define RFM12_TRANSMIT_ASK as 1 to enable this. </dd></dl>
<dl class="warning"><dt><b>Warning:</b></dt><dd>This will interfere with the wakeup timer feature. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000005">Todo:</a></b></dt><dd>Use power management shadow register if the wakeup timer feature is enabled. </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="rfm12__extra_8c.html#a07c6cf0e0a1a6dedc31e05ff4fca35a3" title="Enable the transmitter immediately (ASK transmission mode).">rfm12_tx_on()</a> and <a class="el" href="rfm12__extra_8c.html#a6e836bfa17609b3e937902eaba82f040" title="En- or disable ASK transmissions.">rfm12_ask_tx_mode()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a07c6cf0e0a1a6dedc31e05ff4fca35a3"></a><!-- doxytag: member="rfm12_extra.c::rfm12_tx_on" ref="a07c6cf0e0a1a6dedc31e05ff4fca35a3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void rfm12_tx_on </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable the transmitter immediately (ASK transmission mode). </p>
<p>This will send out the current buffer contents. This function is used to emulate amplitude modulated signals.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>You need to define RFM12_TRANSMIT_ASK as 1 to enable this. </dd></dl>
<dl class="warning"><dt><b>Warning:</b></dt><dd>This will interfere with the wakeup timer feature. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000004">Todo:</a></b></dt><dd>Use power management shadow register if the wakeup timer feature is enabled. </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="rfm12__extra_8c.html#a9c2aa5cfb23d974d8a6c91a08487d76e" title="Set default power mode (usually transmitter off, receiver on).">rfm12_tx_off()</a> and <a class="el" href="rfm12__extra_8c.html#a6e836bfa17609b3e937902eaba82f040" title="En- or disable ASK transmissions.">rfm12_ask_tx_mode()</a> </dd></dl>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a135ac6a750ac4a997cf86746eb139f85"></a><!-- doxytag: member="rfm12_extra.c::ask_rxbuf" ref="a135ac6a750ac4a997cf86746eb139f85" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrfm12__rfrxbuf__t.html">rfm12_rfrxbuf_t</a> <a class="el" href="rfm12__extra_8h.html#a135ac6a750ac4a997cf86746eb139f85">ask_rxbuf</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The ASK mode receive buffer structure. </p>
<p>You will need to poll the state field of this structure to determine if data is available, see <a class="el" href="rfm12__extra_8h.html#ask_defines">ASK mode defines</a>. <br/>
 Received data can be read from the buf field. It is necessary to reset the state field to RFM12_ASK_STATE_EMPTY after reading.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>You need to define RFM12_RECEIVE_ASK as 1 to enable this. </dd></dl>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>
<span style="float:left" ><a href="http://www.das-labor.org"><img src="labor.png" style="border:0px" /><br /><b>Das LABOR</b></a></span>
Generated on Tue Nov 3 17:18:05 2009 for rfm12lib by&nbsp;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1</small></address>
</body>
</html>
